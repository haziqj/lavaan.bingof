---
output: pdf_document
toc: true
title: "Tables of simulation results"
pkgdown:
  as_is: true
  extension: pdf
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  echo = FALSE
)
library(tidyverse)
theme_set(theme_bw())
library(kableExtra)
library(lavaan.bingof)
nn <- c(500, 1000, 2000, 3000)
```


## Simple random sampling

```{r, results = "asis"}
# Type I errors
for(the_n in nn) {
  cat(paste0("  \n### Type I errors ($n=",  the_n, "$)  \n"))
  res_srs_type1 %>% 
    filter(n == the_n) %>%
    arrange(n, sim, name) %>%
    select(sim, name, everything(), -n) %>%
    kbl(booktabs = TRUE, digits = 3) %>%
    kable_styling(latex_options = c("HOLD_position", "scale_down")) %>%
    collapse_rows(1:2, row_group_label_position = "stack", 
                  latex_hline = "major") %>%
    print()
  cat("  \n")
}

# Power 
for(the_n in nn) {
  cat(paste0("  \n### Power ($n=",  the_n, "$)  \n"))
  res_srs_power %>% 
    filter(n == the_n) %>%
    arrange(n, sim, name) %>%
    select(sim, name, everything(), -n) %>%
    kbl(booktabs = TRUE, digits = 3) %>%
    kable_styling(latex_options = c("HOLD_position", "scale_down")) %>%
    collapse_rows(1:2, row_group_label_position = "stack", 
                  latex_hline = "major") %>%
    print()
  cat("  \n")
}
```


<!--Complex sampling results-->

```{r, results = "asis"}
samps <- c("Stratified", "Cluster", "Strat-clust")

for (the_samp in samps) {
  cat(paste0("  \n## ", the_samp, " sampling", "  \n"))
  
  # Type I errors
  for(the_n in nn) {
    cat(paste0("  \n### Type I errors ($n=",  the_n, "$)  \n"))
    res_complex_type1 %>% 
      filter(n == the_n, sampling == samps) %>%
      arrange(n, sim, name) %>%
      select(sim, name, everything(), -n, -sampling) %>%
      kbl(booktabs = TRUE, digits = 3) %>%
      kable_styling(latex_options = c("HOLD_position", "scale_down")) %>%
      collapse_rows(1:2, row_group_label_position = "stack", 
                    latex_hline = "major") %>%
      print()
    cat("  \n")
  }
  
  # Power 
  for(the_n in nn) {
    cat(paste0("  \n### Power ($n=",  the_n, "$)  \n"))
    res_complex_power %>% 
      filter(n == the_n, sampling == samps) %>%
      arrange(n, sim, name) %>%
      select(sim, name, everything(), -n, -sampling) %>%
      kbl(booktabs = TRUE, digits = 3) %>%
      kable_styling(latex_options = c("HOLD_position", "scale_down")) %>%
      collapse_rows(1:2, row_group_label_position = "stack", 
                    latex_hline = "major") %>%
      print()
    cat("  \n")
  }
}
```


