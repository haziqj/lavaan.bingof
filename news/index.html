<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • lavaan.bingof</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><!-- mathjax --><!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script> --><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
  MathJax.Hub.Config({
    TeX: { extensions: ["autoload-all.js"] }
  });
</script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">lavaan.bingof</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Technical details</h6></li>
    <li><a class="dropdown-item" href="../articles/intro.html">Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/complex_sampling.html">Complex sampling procedure</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Simulation study</h6></li>
    <li><a class="dropdown-item" href="../articles/sim_results.html">Description and results</a></li>
    <li><a class="dropdown-item" href="../articles/sim_tables.pdf">Tables of simulation results (PDF)</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/haziqj/lavaan.bingof/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Changelog</h1>
      <small>Source: <a href="https://github.com/haziqj/lavaan.bingof/blob/main/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="development version" id="lavaanbingof-development-version">lavaan.bingof (development version)<a class="anchor" aria-label="anchor" href="#lavaanbingof-development-version"></a></h2>
<div class="section level3">
<h3 id="id_2024-development-version">2024-07-01<a class="anchor" aria-label="anchor" href="#id_2024-development-version"></a></h3>
<ul><li>Preparing package for “public” release, as article is about to be accepted.</li>
<li>Slim down the package to only the necessary functions.</li>
<li>All simulation results and scripts are moved to <a href="https://osf.io/2d97y/" class="external-link uri">https://osf.io/2d97y/</a>
</li>
</ul></div>
<div class="section level3">
<h3 id="id_2023-development-version">2023-09-11<a class="anchor" aria-label="anchor" href="#id_2023-development-version"></a></h3>
<ul><li>Added some functionality to investigate informative sampling a la Muthen (2005). Functions involved: <code><a href="../reference/gen_data_bin_wt.html">gen_data_bin_wt()</a></code> and also in the <code><a href="../reference/run_ligof_sims.html">run_ligof_sims()</a></code> wrapper.</li>
<li>There’s a secret stratified sampling option via <code>gen_data_bin_strat2()</code>. In case this needs further exploration.</li>
</ul></div>
<div class="section level3">
<h3 id="id_2023-development-version-1">2023-09-01<a class="anchor" aria-label="anchor" href="#id_2023-development-version-1"></a></h3>
<ul><li>Just as a sanity check, I coded my own pairwise likelihood function to see if the weighted PML in <a href="https://lavaan.ugent.be" class="external-link">lavaan</a> is doing what is expected. Short answer is yes–no issues there, including the <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>H</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup><annotation encoding="application/x-tex">H^{-1}</annotation></semantics></math> matrix. However no improvement to test statistics.</li>
<li>Another idea was to fix the parameter values in <a href="https://lavaan.ugent.be" class="external-link">lavaan</a>. Unfortunately the fact that the model has no free parameters means that no Hessian and derivatives are calculated.</li>
<li>Tested whether the option <code>sampling.weights.normalization = "none"</code> had any effect on test statistics. The answer is no. Exact same values are obtained.</li>
</ul></div>
<div class="section level3">
<h3 id="id_2023-development-version-2">2023-06-04<a class="anchor" aria-label="anchor" href="#id_2023-development-version-2"></a></h3>
<ul><li>Rewrote the function for estimating complex multinomial matrix <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>𝚺</mi><annotation encoding="application/x-tex">\boldsymbol\Sigma</annotation></semantics></math> which uses the method from the <a href="http://r-survey.r-forge.r-project.org/survey/" class="external-link">survey</a> package. (Although the one from that package does not work well when <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo>=</mo><mn>15</mn></mrow><annotation encoding="application/x-tex">p=15</annotation></semantics></math> and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>=</mo><mn>120</mn></mrow><annotation encoding="application/x-tex">S=120</annotation></semantics></math>).</li>
<li>Added bootstrap functionality for finding the complex multinomial matrix. This uses the bootstrap sampling functionality from the <a href="https://bschneidr.github.io/svrep/" class="external-link">svrep</a> package.</li>
<li>Increment package version to 0.1.1</li>
</ul></div>
<div class="section level3">
<h3 id="id_2023-development-version-3">2023-05-12<a class="anchor" aria-label="anchor" href="#id_2023-development-version-3"></a></h3>
<ul><li>Bug in the <code><a href="../reference/gen_data_bin_complex.html">gen_data_bin_strat()</a></code> function. It ignores the sample size argument <code>n</code> so all simulations were actually using the same sample size.</li>
<li>Update simulation results accordingly.</li>
</ul></div>
<div class="section level3">
<h3 id="id_2023-development-version-4">2023-04-15<a class="anchor" aria-label="anchor" href="#id_2023-development-version-4"></a></h3>
<ul><li>Added test suite for the package.</li>
<li>Change of notation: The test statistic (previously <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>W</mi><annotation encoding="application/x-tex">W</annotation></semantics></math>) is now denoted <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>X</mi><mn>2</mn></msup><annotation encoding="application/x-tex">X^2</annotation></semantics></math>. This makes sense because they are all generally chi-square variates. Avoids confusion with ‘weights’.</li>
</ul></div>
<div class="section level3">
<h3 id="id_2023-development-version-5">2023-04-14<a class="anchor" aria-label="anchor" href="#id_2023-development-version-5"></a></h3>
<ul><li>Fixed bug in <code>lavaan.bingof:::create_Sigma2_matrix_complex()</code> where it did not loop over strata.</li>
<li>Fixed bug in <code>lavaan.bingof:::extract_lavaan_info()</code> would extract the <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mn>2</mn><mi>p</mi></msup><annotation encoding="application/x-tex">2^p</annotation></semantics></math> proportion tables. No wonder the simulations ran slow… oops.</li>
<li>Now using <code><a href="https://rdrr.io/pkg/MASS/man/ginv.html" class="external-link">MASS::ginv</a></code> for inverting <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>𝚵</mi><annotation encoding="application/x-tex">\boldsymbol \Xi</annotation></semantics></math> weights. Not sure if this is a good idea? This really only affects the Wald test and Multinomial test (apparently anyway).</li>
<li>Re-ran all simulations</li>
<li>Wald and Wald V3 performs very poorly when the rank of weight matrix <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>𝚵</mi><annotation encoding="application/x-tex">\boldsymbol\Xi</annotation></semantics></math> is rank deficient. Noticed that this occurs often in complex sampling and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>𝚺</mi><mn>2</mn></msub><annotation encoding="application/x-tex">\boldsymbol\Sigma_2</annotation></semantics></math> matrix is not full rank.</li>
</ul></div>
<div class="section level3">
<h3 id="id_2023-development-version-6">2023-04-08<a class="anchor" aria-label="anchor" href="#id_2023-development-version-6"></a></h3>
<ul><li>Create R package <a href="https://github.com/haziqj/lavaan.bingof" class="external-link">lavaan.bingof</a> for easier shipment of R codes to implement the goodness-of-fit tests.</li>
<li>Migrate from <a href="https://github.com/rstudio/bookdown" class="external-link">bookdown</a> format presentation to <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> articles.</li>
<li>Previous repo <a href="https://github.com/haziqj/gof-comp-lik/" class="external-link">haziqj/gof-comp-lik</a> and accompanying website will likely be shutdown.</li>
</ul></div>
<div class="section level3">
<h3 id="id_2023-development-version-7">2023-04-01<a class="anchor" aria-label="anchor" href="#id_2023-development-version-7"></a></h3>
<ul><li>After further discussions, decide to stratify the population based on the latent variable <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>η</mi><annotation encoding="application/x-tex">\eta</annotation></semantics></math>. See technical details for clarification.</li>
<li>In turn, the only missing component was the proper estimation of the multinomial matrix <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>𝚺</mi><annotation encoding="application/x-tex">\boldsymbol\Sigma</annotation></semantics></math> using sampling weights.</li>
<li>Finally, the complex sampling simulation works!</li>
</ul></div>
<div class="section level3">
<h3 id="id_2023-development-version-8">2023-03-22<a class="anchor" aria-label="anchor" href="#id_2023-development-version-8"></a></h3>
<ul><li>Experimenting with a different complex sampling scheme, whereby the population is determined by multiple variable including stratum-level, cluster-level, and other individual characteristics (called shape, colour, and “mystery”).</li>
<li>Inspired by the blog post “<a href="https://www.r-bloggers.com/2018/08/estimating-relative-risk-in-a-simulated-complex-survey-by-ellis2013nz/" class="external-link">Estimating relative risk in a simulated complex survey by </a><a href="https://github.com/ellis2013nz" class="external-link">@ellis2013nz</a>”.</li>
<li>However, generating data this way makes the population highly misspecified, and so none of the test statistics work.</li>
</ul></div>
<div class="section level3">
<h3 id="id_2023-development-version-9">2023-02-26<a class="anchor" aria-label="anchor" href="#id_2023-development-version-9"></a></h3>
<ul><li>Wrote the technical details section for the derivation of the test statistics using both maximum likelihood estimation and pairwise maximum likelihood estimation.</li>
<li>Consequently all R code was rewritten for efficiency.</li>
<li>Added the missing parts of the test statistics, including
<ul><li>Degree of freedom calculation via Rao-Scott type adjustment and moment matching.</li>
<li>New tests: Wald V3, RSS and Multinomial.</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="id_2023-development-version-10">2023-02-20<a class="anchor" aria-label="anchor" href="#id_2023-development-version-10"></a></h3>
<ul><li>Decided on a very basic stratified sampling procedure, where the population consists of 50 strata with varying population size within each stratum. The number of PSU to be selected is 20 so total sample size is 1000.</li>
<li>To create homogeneity within stratum, a stratum level random effect was generated.</li>
<li>Although bias was reduced when sampling weights were used, the test statistics values still were suspect.</li>
</ul></div>
<div class="section level3">
<h3 id="id_2023-development-version-11">2023-01-25<a class="anchor" aria-label="anchor" href="#id_2023-development-version-11"></a></h3>
<ul><li>After a long hiatus, revisit the sampling weights problem.</li>
<li>Successfully modified the relevant parts in <a href="https://lavaan.ugent.be" class="external-link">lavaan</a> so that sampling weights can be used. The objective function (to be minimised) now takes the normalised weights instead of frequency counts.</li>
<li>See github.com/haziqj/lavaan and install this fork of <a href="https://lavaan.ugent.be" class="external-link">lavaan</a>
</li>
<li>Next problem is how best to generate a complex sample?</li>
</ul></div>
<div class="section level3">
<h3 id="id_2021-development-version">2021-09-25<a class="anchor" aria-label="anchor" href="#id_2021-development-version"></a></h3>
<ul><li>Simulation results reproduced for the SRS case.</li>
<li>Unable to proceed with complex sampling case because <a href="https://lavaan.ugent.be" class="external-link">lavaan</a> does not accept <code>sampling.weights</code> for <code>estimator = "PML"</code>.</li>
</ul></div>
<div class="section level3">
<h3 id="id_2021-development-version-1">2021-08-29<a class="anchor" aria-label="anchor" href="#id_2021-development-version-1"></a></h3>
<ul><li>Inherit R scripts and rewrite for reproducibility.</li>
<li>All R code tested.</li>
</ul></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://haziqj.ml/" class="external-link">Haziq Jamil</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

